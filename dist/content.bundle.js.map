{"version":3,"file":"content.bundle.js","mappings":"mBAEA,MCAMA,EAAYC,OAAOC,eACnBC,ECWsBH,KAC1B,MACMI,EADQJ,EAAUK,WAAW,GACRC,wBAErBC,EAAmBN,OAAOO,YAAc,EAE9C,OAAOJ,EAAaK,IAAML,EAAaM,OAAS,EAAIH,CAE3C,EDnBKI,CAAYX,IAEpBS,IAAG,OAAEG,EAAI,OAAEC,EAAM,MAAEC,GCLOd,KAChC,GAAIA,EAAUe,WAAa,EAAG,CAC5B,MACMX,EADQJ,EAAUK,WAAW,GACRC,wBAE3B,MAAO,CACLG,IAAKL,EAAaK,IAAMR,OAAOe,QAC/BJ,KAAMR,EAAaQ,KAAOX,OAAOgB,QACjCJ,OAAQT,EAAaS,OAASZ,OAAOe,QACrCF,MAAOV,EAAaU,MAAQb,OAAOgB,QAEvC,GDNmCC,CAAkBlB,GAKjDmB,EAAchB,EAAUU,EAAS,GAAKJ,EAFpB,IAE4C,GAC9DW,GAAiBR,EAAOE,GAAS,EAAIO,IAErCC,EAAiBC,SAASC,cAAc,OAC9CF,EAAeG,aAAa,KAAM,kBAElCH,EAAeI,MAAMC,QAAW,uQAUrBR,mBACCC,qFAKZQ,YAAW,KACTL,SAASM,cAAc,mBAAmBH,MAAMI,UAAY,UAAU,GACrE,KAEH,MAAMC,EAAoB5B,EAAW,QAAS,QACxC6B,EAAa7B,GAAW,GAAK,IAE7B8B,EAAQV,SAASC,cAAc,OACrCS,EAAMP,MAAMC,QAAW,4OAOZI,6BACaC,wCAIxB,MAAME,EAAeX,SAASC,cAAc,KAC5CU,EAAaT,aAAa,KAAM,gBAChCS,EAAaR,MAAMC,QAAW,+PAY9B,MAAMQ,EAAgBZ,SAASC,cAAc,OAC7CW,EAAcT,MAAMC,QAAW,+QAW/B,MAAMS,EAAab,SAASC,cAAc,OAC1CY,EAAWV,MAAMC,QAAW,wQAW5BL,EAAee,YAAYF,GAC3Bb,EAAee,YAAYD,GAC3Bd,EAAee,YAAYJ,GAC3BX,EAAee,YAAYH,GAE3B,UE1FMlC,EAAYC,OAAOC,eAMJoC,EAAMT,cAAc,iBAC5BU,UAAYvC,EAAUwC,WAEnCjB,SAASkB,KAAKC,mBAAmB,aAAcJ,EAAMK,WAErDpB,SAASqB,iBAAiB,SAAUC,IAClC,MAAMvB,EAAiBC,SAASM,cAAc,mBACzCP,EAAewB,SAASD,EAAEE,UAC7BzB,EAAeI,MAAMI,UAAa,WAClCR,EAAeI,MAAMjB,IAAM,QAC3BmB,YAAW,KACTN,EAAe0B,QAAQ,GACtB,KACL,IAGF,IAAIC,EAAc,EAElBhD,OAAO2C,iBAAiB,UAAWC,IACjC,MAAMvB,EAAiBC,SAASM,cAAc,mBACzCP,EAAewB,SAASD,EAAEE,UAC7BE,IACIA,GALe,KAMjB3B,EAAeI,MAAMI,UAAa,WAClCR,EAAeI,MAAMjB,IAAM,KAE/B,G","sources":["webpack://clarify-ai/./src/services/index.js","webpack://clarify-ai/./src/components/popup.js","webpack://clarify-ai/./src/utils/helpers.js","webpack://clarify-ai/./src/content.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY_AI = \"40xWby26Fb2w295NMSXdJRtWbVsgWqgd\";\nconst apiUrl =\n  \"https://api.deepinfra.com/v1/inference/meta-llama/Llama-2-70b-chat-hf\";\n\nconst headers = {\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${API_KEY_AI}`,\n};\n\nexport const generateText = async (prompt) => {\n  const requestData = {\n    input: `[INST] <<SYS>> You are a science communicator, your task is to read the following\n            text snippet and describe its content in a simple, short, and understandable way,\n            ensuring clarity for a general audience <<SYS>> ${prompt}[/INST]`,\n  };\n\n  try {\n    const request = await axios.post(apiUrl, requestData, { headers: headers });\n    return request.data;\n  } catch (error) {\n    console.error(\"Error:\", error);\n    return error;\n  }\n};\n","import { getSelectionCords, isInTopHalf } from \"../utils/helpers\";\n\nconst selection = window.getSelection();\nconst isInTop = isInTopHalf(selection);\n\nconst { top, left, bottom, right } = getSelectionCords(selection);\n\nconst containerWidth = 350;\nconst containerHeight = 200;\n\nconst verticalPos = isInTop ? bottom + 10 : top - containerHeight - 10;\nconst horizontalPos = (left + right) / 2 - containerWidth / 2;\n\nconst popupContainer = document.createElement(\"div\");\npopupContainer.setAttribute(\"id\", \"popupContainer\");\n\npopupContainer.style.cssText = `\n    transform: scale(0);\n    transition: all linear 0.2s;\n    width: ${containerWidth}px;\n    height: ${containerHeight}px;\n    background-color: rgba(27, 18, 18, 0.8);\n    position: absolute;\n    z-index: 30000;\n    border-radius: 7px;\n    backdrop-filter: blur(5px);\n    top: ${verticalPos}px;\n    left: ${horizontalPos}px;\n    box-shadow: 0px 0px 10px rgba(27, 18, 18, 0.7);\n    color: white;\n    `;\n\nsetTimeout(() => {\n  document.querySelector(\"#popupContainer\").style.transform = \"scale(1)\";\n}, 100);\n\nconst arrowVertPosition = isInTop ? `-10px` : \"185px\";\nconst arrowPoint = isInTop ? -45 : 135;\n\nconst arrow = document.createElement(\"div\");\narrow.style.cssText = `position: absolute;\n    z-index: 2999;\n    width: 25px;\n    height: 25px;\n    background: rgb(238,174,202);\n    background: linear-gradient(45deg, rgba(238,174,202,0) 55%, rgba(27, 18, 18, 0.8) 58%);\n    left: ${containerWidth / 2}px;\n    top: ${arrowVertPosition};\n    transform: rotate(${arrowPoint}deg);\n    border-radius: 5px;\n    `;\n\nconst popupContent = document.createElement(\"p\");\npopupContent.setAttribute(\"id\", \"popupContent\");\npopupContent.style.cssText = `color: rgb(249, 246, 238);\n    margin: 0;\n    height: calc(100% - 35px);\n    padding-right: 15px;\n    padding-left: 15px;\n    padding-top: 15px;\n    padding-bottom: 15px;\n    font-size: 15px;\n    overflow: scroll;\n    position: relative;\n    `;\n\nconst fadeOutBottom = document.createElement(\"div\");\nfadeOutBottom.style.cssText = `\n    position: absolute;\n    z-index: 30001;\n    top: 160px;\n    height: 40px;\n    width: 100%; \n    background: linear-gradient(to top, rgba(27, 18, 18, 0.8), rgba(27, 18, 18, 0) 95%);\n    border-bottom-right-radius: 7px;\n    border-bottom-left-radius: 7px;\n`;\n\nconst fadeOutTop = document.createElement(\"div\");\nfadeOutTop.style.cssText = `\n    position: absolute;\n    z-index: 30001;\n    top: 0;\n    height: 15px;\n    width: 100%; \n    background: linear-gradient(to bottom, rgba(27, 18, 18, 0.6), rgba(27, 18, 18, 0) 95%);\n    border-top-right-radius: 7px;\n    border-top-left-radius: 7px;\n`;\n\npopupContainer.appendChild(fadeOutBottom);\npopupContainer.appendChild(fadeOutTop);\npopupContainer.appendChild(arrow);\npopupContainer.appendChild(popupContent);\n\nexport default popupContainer;\n","export const getSelectionCords = (selection) => {\n  if (selection.rangeCount > 0) {\n    const range = selection.getRangeAt(0);\n    const boundingRect = range.getBoundingClientRect();\n\n    return {\n      top: boundingRect.top + window.scrollY,\n      left: boundingRect.left + window.scrollX,\n      bottom: boundingRect.bottom + window.scrollY,\n      right: boundingRect.right + window.scrollX,\n    };\n  }\n};\n\nexport const isInTopHalf = (selection) => {\n  const range = selection.getRangeAt(0);\n  const boundingRect = range.getBoundingClientRect();\n\n  const verticalMidpoint = window.innerHeight / 2;\n\n  return boundingRect.top + boundingRect.height / 2 < verticalMidpoint\n    ? true\n    : false;\n};\n","import { generateText } from \"./services\";\nimport popup from \"./components/popup.js\";\n\n// document.querySelector(\"#popupContainer\").remove();\n\nconst selection = window.getSelection();\n// generateText(selection.toString()).then((data) => {\n//   const text = data.results[0].generated_text;\n//   console.log(text);\n// });\n\nconst popupContent = popup.querySelector(\"#popupContent\");\npopupContent.innerHTML = selection.toString();\n\ndocument.body.insertAdjacentHTML(\"afterbegin\", popup.outerHTML);\n\ndocument.addEventListener(\"click\", (e) => {\n  const popupContainer = document.querySelector(\"#popupContainer\");\n  if (!popupContainer.contains(e.target)) {\n    popupContainer.style.transform = `scale(0)`;\n    popupContainer.style.top = \"300px\";\n    setTimeout(() => {\n      popupContainer.remove();\n    }, 200);\n  }\n});\n\nlet scrollCount = 0;\nconst maxScrollCount = 50;\nwindow.addEventListener(\"scroll\", (e) => {\n  const popupContainer = document.querySelector(\"#popupContainer\");\n  if (!popupContainer.contains(e.target)) {\n    scrollCount++;\n    if (scrollCount >= maxScrollCount) {\n      popupContainer.style.transform = `scale(0)`;\n      popupContainer.style.top = 100;\n    }\n  }\n});\n"],"names":["selection","window","getSelection","isInTop","boundingRect","getRangeAt","getBoundingClientRect","verticalMidpoint","innerHeight","top","height","isInTopHalf","left","bottom","right","rangeCount","scrollY","scrollX","getSelectionCords","verticalPos","horizontalPos","containerWidth","popupContainer","document","createElement","setAttribute","style","cssText","setTimeout","querySelector","transform","arrowVertPosition","arrowPoint","arrow","popupContent","fadeOutBottom","fadeOutTop","appendChild","popup","innerHTML","toString","body","insertAdjacentHTML","outerHTML","addEventListener","e","contains","target","remove","scrollCount"],"sourceRoot":""}