{"version":3,"file":"content/content.index.js","mappings":"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","sources":["webpack://clarify-ai/./src/popup/utils/logger.js","webpack://clarify-ai/./src/popup/utils/constants.js","webpack://clarify-ai/./src/popup/utils/getElements.js","webpack://clarify-ai/./src/popup/utils/coordinates.js","webpack://clarify-ai/./src/popup/utils/animations.js","webpack://clarify-ai/./src/popup/utils/popupEventListeners.js","webpack://clarify-ai/./src/popup/components/heading.js","webpack://clarify-ai/./src/popup/utils/writeInPopupContent.js","webpack://clarify-ai/./src/popup/components/fadeOut.js","webpack://clarify-ai/./src/popup/components/popup.js","webpack://clarify-ai/./src/popup/components/arrow.js","webpack://clarify-ai/./src/popup/components/popupContent.js","webpack://clarify-ai/./src/popup/components/popupContainer.js","webpack://clarify-ai/./src/popup/index.js","webpack://clarify-ai/./src/popup/components/loader.js","webpack://clarify-ai/./src/popup/utils/generateText.js","webpack://clarify-ai/./src/popup/utils/injectInDom.js","webpack://clarify-ai/./src/popup/components/root.js"],"sourcesContent":["const logger = {\n  info: (infoToLog) => {\n    console.log(infoToLog);\n  },\n  error: (infoToLog) => {\n    // console.log(\"miau\");\n    // console.error(infoToLog);\n  },\n};\n\nexport default logger;\n","const CONTAINER_WIDTH = 350;\nconst CONTAINER_HEIGHT = 200;\n\n// IDs\nconst POPUP_CONTAINER_ID = \"popupContainer\";\nconst POPUP_CONTENT_ID = \"popupContent\";\nconst ROOT_CONTAINER_ID = \"rootContainer\";\n\n// Classnames\nconst LOADER_CLASSNAME = \"loader\";\n\nexport {\n  CONTAINER_WIDTH,\n  CONTAINER_HEIGHT,\n  POPUP_CONTAINER_ID,\n  POPUP_CONTENT_ID,\n  ROOT_CONTAINER_ID,\n  LOADER_CLASSNAME,\n};\n","import logger from \"./logger\";\nimport {\n  POPUP_CONTENT_ID,\n  ROOT_CONTAINER_ID,\n  POPUP_CONTAINER_ID,\n} from \"./constants\";\n\n// Helper function to get an element by ID from a given root\nconst getElementByIdInRoot = (root, id, errorMessage) => {\n  const element = root.getElementById(id);\n  if (!element) {\n    logger.error(errorMessage);\n  }\n  return element;\n};\n\n// Returns the root container\nexport const getRootContainer = () => {\n  const rootContainer = document.getElementById(ROOT_CONTAINER_ID);\n  if (!rootContainer) {\n    logger.error(\"Root container not found\");\n    return null;\n  }\n\n  return rootContainer;\n};\n\n// Returns the root of popup shadow DOM\nexport const getShadowRoot = () => {\n  const rootContainer = getRootContainer();\n  return rootContainer ? rootContainer.shadowRoot : null;\n};\n\n// Returns the main container of popup\nexport const getPopupContainer = () => {\n  const shadowRoot = getShadowRoot();\n  return shadowRoot\n    ? getElementByIdInRoot(\n        shadowRoot,\n        POPUP_CONTAINER_ID,\n        \"Popup container not found in shadow root\"\n      )\n    : null;\n};\n\n// Returns the content container of popup\nexport const getPopupContent = () => {\n  const shadowRoot = getShadowRoot();\n  return shadowRoot\n    ? getElementByIdInRoot(\n        shadowRoot,\n        POPUP_CONTENT_ID,\n        \"Popup content not found in shadow root\"\n      )\n    : null;\n};\n","import { CONTAINER_HEIGHT, CONTAINER_WIDTH } from \"./constants\";\n\nconst selection = window.getSelection();\n\n// Gets coordinates of user text selection\nexport const getSelectionCoords = (selection) => {\n  if (selection.rangeCount > 0) {\n    const range = selection.getRangeAt(0);\n    const boundingRect = range.getBoundingClientRect();\n\n    return {\n      top: boundingRect.top + window.scrollY,\n      left: boundingRect.left + window.scrollX,\n      bottom: boundingRect.bottom + window.scrollY,\n      right: boundingRect.right + window.scrollX,\n    };\n  }\n};\n\n// Checks whether the selection is in top or bottom half of a screen\nexport const isInTopHalf = (selection) => {\n  const range = selection.getRangeAt(0);\n  const boundingRect = range.getBoundingClientRect();\n\n  const verticalMidpoint = window.innerHeight / 2;\n\n  return boundingRect.top + boundingRect.height / 2 < verticalMidpoint;\n};\n\nconst calculateVerticalPos = (isInTop, top, bottom) => {\n  // sus\n  const viewportStartY = window.scrollY || window.pageYOffset;\n  const viewportEndY = viewportStartY + window.innerHeight;\n  const exceedsBottom = viewportEndY < bottom + CONTAINER_HEIGHT;\n  const exceedsTop = viewportStartY > top - CONTAINER_HEIGHT;\n\n  // Don't know what's happening here but it works\n  if (exceedsBottom && isInTop) {\n    return viewportEndY - CONTAINER_HEIGHT - 100;\n  }\n  if (exceedsTop && exceedsBottom) {\n    return viewportStartY + CONTAINER_HEIGHT + 100;\n  }\n  // sus end\n\n  const offset = isInTop ? 10 : -CONTAINER_HEIGHT - 10;\n  return isInTop ? bottom + offset : top + offset;\n};\n\nconst isInTop = isInTopHalf(selection);\nconst { top, left, bottom, right } = getSelectionCoords(selection);\n\n// Vertical position when shown\nconst verticalPos = calculateVerticalPos(isInTop, top, bottom);\n\n// Vertical position when hidden\nconst verticalPosHidden = isInTop\n  ? verticalPos - CONTAINER_HEIGHT / 2\n  : verticalPos + CONTAINER_HEIGHT / 2;\nconst horizontalPos = (left + right) / 2 - CONTAINER_WIDTH / 2;\n\nexport { verticalPos, verticalPosHidden, horizontalPos, isInTop };\n","import { getPopupContainer, getPopupContent } from \"./getElements\";\nimport { verticalPosHidden } from \"./coordinates\";\nimport { LOADER_CLASSNAME } from \"./constants\";\nimport createLoader from \"../components/loader\";\n\nconst OPEN_POPUP_DELAY = 200;\nconst HIDDEN_VERTICAL_POSITION = verticalPosHidden;\nconst LOADER_SCALE = 0;\nconst LOADER_SHOW_SCALE = 1;\n\nexport const openPopupAnimation = (verticalPos) => {\n  setTimeout(() => {\n    const popup = getPopupContainer();\n    popup.style.transform = `scale(${LOADER_SHOW_SCALE})`;\n    popup.style.top = `${verticalPos}px`;\n  }, OPEN_POPUP_DELAY);\n};\n\nexport const closePopupAnimation = () => {\n  const popup = getPopupContainer();\n  popup.style.transform = `scale(${LOADER_SCALE})`;\n  popup.style.top = `${HIDDEN_VERTICAL_POSITION}px`;\n};\n\nexport const showLoader = () => {\n  const popupContent = getPopupContent();\n  if (popupContent) {\n    const loader = createLoader();\n    popupContent.appendChild(loader);\n  }\n};\n\nexport const hideLoader = () => {\n  const popupContent = getPopupContent();\n  if (popupContent) {\n    const loader = popupContent.querySelector(`.${LOADER_CLASSNAME}`);\n    loader.style.transform = `scale(${LOADER_SCALE})`;\n  }\n};\n","import { closePopupAnimation } from \"./animations\";\nimport {\n  getPopupContainer,\n  getRootContainer,\n  getShadowRoot,\n} from \"./getElements\";\n\nlet isMouseInside = false;\n// Counter for smooth popup close\nlet scrollCount = 0;\nconst maxScrollCount = 50;\n\nexport const handlePopupClose = () => {\n  const rootContainer = getRootContainer();\n  const popupContainer = getPopupContainer();\n\n  closePopupAnimation();\n\n  // Removes popup from DOM\n  setTimeout(() => {\n    rootContainer.remove();\n  }, 200);\n\n  // Removing all the listeners\n  document.removeEventListener(\"click\", handleEvent);\n  window.removeEventListener(\"scroll\", handleEvent);\n  popupContainer.removeEventListener(\"mouseover\", handleMouseEnter);\n  popupContainer.removeEventListener(\"mouseout\", handleMouseLeave);\n};\n\nconst handleMouseEnter = () => {\n  isMouseInside = true;\n};\n\nconst handleMouseLeave = () => {\n  isMouseInside = false;\n};\n\nconst handleEvent = (e) => {\n  const root = getShadowRoot();\n\n  if (e.target.shadowRoot !== root && !isMouseInside) {\n    scrollCount++;\n\n    if (e.type === \"scroll\" && scrollCount >= maxScrollCount) {\n      handlePopupClose();\n    } else if (e.type === \"click\") {\n      handlePopupClose();\n    }\n  }\n};\n\nconst listenPopupEvents = () => {\n  const popupContainer = getPopupContainer();\n  document.addEventListener(\"click\", handleEvent);\n  window.addEventListener(\"scroll\", handleEvent);\n\n  // Add listeners for mouseover and mouseout events on the popup container\n  popupContainer.addEventListener(\"mouseover\", handleMouseEnter);\n  popupContainer.addEventListener(\"mouseout\", handleMouseLeave);\n};\n\nexport default listenPopupEvents;\n","const createHeadingDecoration = (style) => {\n  const decoration = document.createElement(\"span\");\n  decoration.style.cssText = `\n    height: 2px;\n    background-color: white;\n    position: absolute;\n    top: 15px;\n    border-radius: 10px 10px 10px 10px;\n    ${style};\n  `;\n\n  return decoration;\n};\n\nconst createHeading = () => {\n  const heading = document.createElement(\"h3\");\n  heading.innerText = \"Clarified\";\n  heading.style.cssText = `\n    margin: 0;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    position: relative;\n    margin-left: 70px;\n    margin-bottom: 14px;`;\n\n  const leftDecorationStyle = `\n    width: 60px;\n    margin-left: 10px;\n    left: -80px;`;\n\n  const rightDecorationStyle = `\n    width: 150px;\n    margin-left: 20px;\n    left: 70px;`;\n\n  const headingDecorationLeft = createHeadingDecoration(leftDecorationStyle);\n  const headingDecorationRight = createHeadingDecoration(rightDecorationStyle);\n\n  heading.appendChild(headingDecorationLeft);\n  heading.appendChild(headingDecorationRight);\n\n  return heading;\n};\n\nexport default createHeading;\n","import { getPopupContent } from \"./getElements\";\nimport createHeading from \"../components/heading\";\nimport logger from \"./logger\";\n\nexport const writeInPopupContent = (textToWrite) => {\n  const popupContent = getPopupContent();\n  if (!popupContent) {\n    logger.error(\"Popup content not found\");\n    return;\n  }\n\n  let i = 0;\n  const speed = 2;\n\n  const heading = createHeading();\n  if (!heading) {\n    logger.error(\"Failed to create heading\");\n    return;\n  }\n\n  popupContent.appendChild(heading);\n\n  const typeWriter = () => {\n    if (i < textToWrite.length) {\n      let char = textToWrite.charAt(i);\n      popupContent.innerHTML += char;\n      i++;\n\n      setTimeout(typeWriter, speed);\n    }\n  };\n\n  typeWriter();\n};\n","// Creates the effect of a text fading out at the bottom and the top insides of a popup\nconst createFadeOut = (side) => {\n  const fadeOut = document.createElement(\"div\");\n\n  if (side === \"top\") {\n    fadeOut.style.cssText = `\n    position: absolute;\n    z-index: 30001;\n    top: 0;\n    height: 15px;\n    width: 100%;\n    background: linear-gradient(to bottom, rgba(27, 18, 18, 0.6), rgba(27, 18, 18, 0) 95%);\n    border-top-right-radius: 7px;\n    border-top-left-radius: 7px;\n`;\n  } else {\n    fadeOut.style.cssText = `\n    position: absolute;\n    z-index: 30001;\n    top: 160px;\n    height: 40px;\n    width: 100%;\n    background: linear-gradient(to top, rgba(27, 18, 18, 0.8), rgba(27, 18, 18, 0) 95%);\n    border-bottom-right-radius: 7px;\n    border-bottom-left-radius: 7px;\n`;\n  }\n  return fadeOut;\n};\n\nexport default createFadeOut;\n","import createArrow from \"./arrow\";\nimport createFadeOut from \"./fadeOut\";\nimport createPopupContainer from \"./popupContainer\";\nimport createPopupContent from \"./popupContent\";\nimport { verticalPos, horizontalPos, isInTop } from \"../utils/coordinates\";\n\n// Creation of all popup components\nconst arrow = createArrow(isInTop);\nconst popupContent = createPopupContent();\nconst fadeOutBottom = createFadeOut(\"bottom\");\nconst fadeOutTop = createFadeOut(\"top\");\nconst popupContainer = createPopupContainer(horizontalPos);\n\n// Assembling the components into a popup\npopupContainer.appendChild(fadeOutBottom);\npopupContainer.appendChild(fadeOutTop);\npopupContainer.appendChild(arrow);\npopupContainer.appendChild(popupContent);\n\nexport default popupContainer;\n","import { CONTAINER_WIDTH } from \"../utils/constants\";\n\n// Creates arrow of a popup which points to user selection\nconst createArrow = (isInTop) => {\n  // Checks whether the arrow should be on top or bottom side\n  const arrowVertPosition = isInTop ? \"-10px\" : \"185px\";\n  // Rotates arrow based on where it's located\n  const arrowPoint = isInTop ? -45 : 135;\n\n  const arrow = document.createElement(\"div\");\n  arrow.style.cssText = `position: absolute;\n    z-index: 2999;\n    width: 25px;\n    height: 25px;\n    background: rgb(238,174,202);\n    background: linear-gradient(45deg, rgba(238,174,202,0) 55%, rgba(27, 18, 18, 0.8) 58%);\n    left: ${CONTAINER_WIDTH / 2 - 5}px;\n    top: ${arrowVertPosition};\n    transform: rotate(${arrowPoint}deg);\n    border-radius: 5px;\n    `;\n\n  return arrow;\n};\n\nexport default createArrow;\n","import { POPUP_CONTENT_ID } from \"../utils/constants\";\n\n// Creates the container for the content to fit in, this is where the generated text goes\nconst createPopupContent = () => {\n  const popupContent = document.createElement(\"div\");\n  popupContent.setAttribute(\"id\", POPUP_CONTENT_ID);\n\n  popupContent.style.cssText = `color: rgb(249, 246, 238);\n    margin: 0;\n    height: calc(100% - 35px);\n    padding-right: 15px;\n    padding-left: 15px;\n    padding-top: 15px;\n    padding-bottom: 15px;\n    font-size: 17px;\n    overflow: scroll;\n    position: relative;\n    font-family: 'EB Garamond', serif;\n    line-height: 22px;\n    `;\n\n  return popupContent;\n};\n\nexport default createPopupContent;\n","import {\n  CONTAINER_HEIGHT,\n  CONTAINER_WIDTH,\n  POPUP_CONTAINER_ID,\n} from \"../utils/constants\";\nimport { verticalPosHidden } from \"../utils/coordinates\";\n\n// Creates the popup container, acts as a skeleton of a popup\nconst createPopupContainer = (horizontalPos) => {\n  const popupContainer = document.createElement(\"div\");\n  popupContainer.setAttribute(\"id\", POPUP_CONTAINER_ID);\n\n  popupContainer.style.cssText = `\n    transform: scale(0);\n    transition: all linear 0.2s;\n    width: ${CONTAINER_WIDTH}px;\n    height: ${CONTAINER_HEIGHT}px;\n    background-color: rgba(27, 18, 18, 0.8);\n    position: absolute;\n    z-index: 30000;\n    border-radius: 7px;\n    backdrop-filter: blur(5px);\n    top: ${verticalPosHidden}px;\n    left: ${horizontalPos}px;\n    box-shadow: 0px 0px 10px rgba(27, 18, 18, 0.7);\n    color: white;\n    `;\n\n  return popupContainer;\n};\n\nexport default createPopupContainer;\n","import listenPopupEvents, {\n  handlePopupClose,\n} from \"./utils/popupEventListeners.js\";\nimport { writeInPopupContent } from \"./utils/writeInPopupContent.js\";\nimport { hideLoader } from \"./utils/animations.js\";\nimport { openPopupAnimation, showLoader } from \"./utils/animations.js\";\nimport { verticalPos } from \"./utils/coordinates.js\";\nimport { getRootContainer } from \"./utils/getElements.js\";\nimport { createRootContainer, createShadowRoot } from \"./components/root.js\";\nimport { injectFonts } from \"./utils/injectInDom.js\";\nimport logger from \"./utils/logger.js\";\nimport generateText from \"./utils/generateText.js\";\n\nconst openPopupWithGeneratedText = async () => {\n  openPopupAnimation(verticalPos);\n  showLoader();\n\n  try {\n    const prompt = window.getSelection().toString();\n    const generatedText = await generateText(prompt);\n    hideLoader();\n    writeInPopupContent(generatedText);\n  } catch (e) {\n    hideLoader();\n    const error = \"Something went wrong\";\n    writeInPopupContent(error);\n    logger.error(e);\n  }\n};\n\nconst initApp = async () => {\n  // Handle popup close if it already exists\n  if (getRootContainer()) {\n    handlePopupClose();\n  }\n  injectFonts();\n  createRootContainer();\n  createShadowRoot();\n  listenPopupEvents();\n\n  await openPopupWithGeneratedText();\n};\n\ninitApp();\n","import { LOADER_CLASSNAME } from \"../utils/constants\";\n\nconst createLoader = () => {\n  const loader = document.createElement(\"div\");\n  loader.className = LOADER_CLASSNAME;\n\n  return loader;\n};\n\nexport const getLoaderStyles = () => {\n  return `\n  .${LOADER_CLASSNAME} {\n  width: 35px;\n  aspect-ratio: 1;\n  display: grid;\n  transition: all linear 0.1s;\n  position: absolute;\n  top: 80px;\n  left: 160px;\n\n}\n.${LOADER_CLASSNAME}:before,\n.${LOADER_CLASSNAME}:after {\n  content: \"\";\n  grid-area: 1/1;\n  border-radius: 50%;\n  background: #FFFFFF;\n  -webkit-mask:repeating-linear-gradient(#000 0 5px,#0000 0 10px);\n  animation: l35 1.5s infinite;\n}\n.${LOADER_CLASSNAME}:after {\n  -webkit-mask:repeating-linear-gradient(#0000 0 5px,#000 0 10px);\n  --s:-1;\n}\n@keyframes l35 {\n  0%,\n  10% {transform: translate(0) rotate(0)}\n  35% {transform: translate(calc(var(--s,1)*50%)) rotate(0)}\n  66% {transform: translate(calc(var(--s,1)*50%)) rotate(calc(var(--s,1)*180deg))}\n  90%,\n  100% {transform: translate(0) rotate(calc(var(--s,1)*180deg))}\n}`;\n};\n\nexport default createLoader;\n","// Makes sure to wait for the response from service worker, returns response as a promise\nconst generateText = (prompt) => {\n  return new Promise((resolve, reject) => {\n    chrome.runtime.sendMessage(\n      { message: \"generateText\", prompt },\n      (response) => {\n        console.log(response);\n        if (response) {\n          resolve(response);\n        } else {\n          reject(\"Something wrong\");\n        }\n      }\n    );\n  });\n};\n\nexport default generateText;\n","export const injectFonts = () => {\n  const fontLink = document.createElement(\"link\");\n  fontLink.rel = \"stylesheet\";\n  fontLink.href =\n    \"https://fonts.googleapis.com/css2?family=EB+Garamond:wght@500&display=swap\";\n  document.head.appendChild(fontLink);\n};\n","import { getLoaderStyles } from \"./loader\";\nimport { ROOT_CONTAINER_ID } from \"../utils/constants\";\nimport popup from \"./popup\";\n\nexport const createRootContainer = () => {\n  const rootContainer = document.createElement(\"div\");\n  rootContainer.setAttribute(\"id\", ROOT_CONTAINER_ID);\n  document.body.insertAdjacentHTML(\"afterbegin\", rootContainer.outerHTML);\n};\n\nexport const createShadowRoot = () => {\n  const loaderStyles = getLoaderStyles();\n  const shadowRoot = document\n    .getElementById(ROOT_CONTAINER_ID)\n    .attachShadow({ mode: \"open\" });\n\n  shadowRoot.innerHTML = `\n  <style>\n    ${loaderStyles}\n  </style>\n  ${popup.outerHTML}`;\n};\n"],"names":["infoToLog","CONTAINER_HEIGHT","POPUP_CONTAINER_ID","POPUP_CONTENT_ID","ROOT_CONTAINER_ID","LOADER_CLASSNAME","getElementByIdInRoot","root","id","errorMessage","element","getElementById","logger","getRootContainer","document","getShadowRoot","rootContainer","shadowRoot","getPopupContainer","getPopupContent","selection","window","getSelection","isInTop","boundingRect","getRangeAt","getBoundingClientRect","verticalMidpoint","innerHeight","top","height","isInTopHalf","left","bottom","right","rangeCount","scrollY","scrollX","getSelectionCoords","verticalPos","calculateVerticalPos","viewportStartY","pageYOffset","viewportEndY","exceedsBottom","offset","verticalPosHidden","horizontalPos","CONTAINER_WIDTH","HIDDEN_VERTICAL_POSITION","hideLoader","popupContent","querySelector","style","transform","isMouseInside","scrollCount","handlePopupClose","popupContainer","closePopupAnimation","popup","setTimeout","remove","removeEventListener","handleEvent","handleMouseEnter","handleMouseLeave","e","target","type","createHeadingDecoration","decoration","createElement","cssText","writeInPopupContent","textToWrite","i","heading","createHeading","innerText","headingDecorationLeft","headingDecorationRight","appendChild","typeWriter","length","char","charAt","innerHTML","side","fadeOut","arrow","arrowVertPosition","arrowPoint","createArrow","createPopupContent","setAttribute","fadeOutBottom","createFadeOut","fadeOutTop","createPopupContainer","openPopupWithGeneratedText","async","openPopupAnimation","showLoader","loader","createLoader","className","prompt","toString","generatedText","Promise","resolve","reject","chrome","runtime","sendMessage","message","response","console","log","generateText","injectFonts","fontLink","rel","href","head","createRootContainer","body","insertAdjacentHTML","outerHTML","createShadowRoot","loaderStyles","attachShadow","mode","listenPopupEvents","addEventListener","initApp"],"sourceRoot":""}