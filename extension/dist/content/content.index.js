(()=>{"use strict";const n=n=>{},t=200,e="popupContainer",o="popupContent",r="rootContainer",i="loader",a=(t,e,o)=>{const r=t.getElementById(e);return r||n(o),r},s=()=>document.getElementById(r)||(n("Root container not found"),null),d=()=>{const n=s();return n?n.shadowRoot:null},l=()=>{const n=d();return n?a(n,e,"Popup container not found in shadow root"):null},c=()=>{const n=d();return n?a(n,o,"Popup content not found in shadow root"):null},p=window.getSelection(),g=(n=>{const t=n.getRangeAt(0).getBoundingClientRect(),e=window.innerHeight/2;return t.top+t.height/2<e})(p),{top:u,left:m,bottom:x,right:h}=(n=>{if(n.rangeCount>0){const t=n.getRangeAt(0).getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX,bottom:t.bottom+window.scrollY,right:t.right+window.scrollX}}})(p),f=((n,e,o)=>{const r=window.scrollY||window.pageYOffset,i=r+window.innerHeight,a=i<o+t;if(a&&n)return i-t-100;if(r>e-t&&a)return r+t+100;const s=n?10:-210;return n?o+s:e+s})(g,u,x),b=g?f-100:f+100,w=(m+h)/2-175,v=b,y=()=>{const n=c();n&&(n.querySelector(`.${i}`).style.transform="scale(0)")};let E=!1,k=0;const C=()=>{const n=s(),t=l();(()=>{const n=l();n.style.transform="scale(0)",n.style.top=`${v}px`})(),setTimeout((()=>{n.remove()}),200),document.removeEventListener("click",L),window.removeEventListener("scroll",L),t.removeEventListener("mouseover",T),t.removeEventListener("mouseout",$)},T=()=>{E=!0},$=()=>{E=!1},L=n=>{const t=d();n.target.shadowRoot===t||E||(k++,("scroll"===n.type&&k>=50||"click"===n.type)&&C())},A=n=>{const t=document.createElement("span");return t.style.cssText=`\n    height: 2px;\n    background-color: white;\n    position: absolute;\n    top: 15px;\n    border-radius: 10px 10px 10px 10px;\n    ${n};\n  `,t},B=t=>{const e=c();if(!e)return void n("Popup content not found");let o=0;const r=(()=>{const n=document.createElement("h3");n.innerText="Clarified",n.style.cssText="\n    margin: 0;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    position: relative;\n    margin-left: 70px;\n    margin-bottom: 14px;";const t=A("\n    width: 60px;\n    margin-left: 10px;\n    left: -80px;"),e=A("\n    width: 150px;\n    margin-left: 20px;\n    left: 70px;");return n.appendChild(t),n.appendChild(e),n})();if(!r)return void n("Failed to create heading");e.appendChild(r);const i=()=>{if(o<t.length){let n=t.charAt(o);e.innerHTML+=n,o++,setTimeout(i,2)}};i()},F=n=>{const t=document.createElement("div");return t.style.cssText="top"===n?"\n    position: absolute;\n    z-index: 30001;\n    top: 0;\n    height: 15px;\n    width: 100%;\n    background: linear-gradient(to bottom, rgba(27, 18, 18, 0.6), rgba(27, 18, 18, 0) 95%);\n    border-top-right-radius: 7px;\n    border-top-left-radius: 7px;\n":"\n    position: absolute;\n    z-index: 30001;\n    top: 160px;\n    height: 40px;\n    width: 100%;\n    background: linear-gradient(to top, rgba(27, 18, 18, 0.8), rgba(27, 18, 18, 0) 95%);\n    border-bottom-right-radius: 7px;\n    border-bottom-left-radius: 7px;\n",t},H=(n=>{const t=n?"-10px":"185px",e=n?-45:135,o=document.createElement("div");return o.style.cssText=`position: absolute;\n    z-index: 2999;\n    width: 25px;\n    height: 25px;\n    background: rgb(238,174,202);\n    background: linear-gradient(45deg, rgba(238,174,202,0) 55%, rgba(27, 18, 18, 0.8) 58%);\n    left: 170px;\n    top: ${t};\n    transform: rotate(${e}deg);\n    border-radius: 5px;\n    `,o})(g),R=(()=>{const n=document.createElement("div");return n.setAttribute("id",o),n.style.cssText="color: rgb(249, 246, 238);\n    margin: 0;\n    height: calc(100% - 35px);\n    padding-right: 15px;\n    padding-left: 15px;\n    padding-top: 15px;\n    padding-bottom: 15px;\n    font-size: 17px;\n    overflow: scroll;\n    position: relative;\n    font-family: 'EB Garamond', serif;\n    line-height: 22px;\n    ",n})(),S=F("bottom"),M=F("top"),z=(n=>{const t=document.createElement("div");return t.setAttribute("id",e),t.style.cssText=`\n    transform: scale(0);\n    transition: all linear 0.2s;\n    width: 350px;\n    height: 200px;\n    background-color: rgba(27, 18, 18, 0.8);\n    position: absolute;\n    z-index: 30000;\n    border-radius: 7px;\n    backdrop-filter: blur(5px);\n    top: ${b}px;\n    left: ${n}px;\n    box-shadow: 0px 0px 10px rgba(27, 18, 18, 0.7);\n    color: white;\n    `,t})(w);z.appendChild(S),z.appendChild(M),z.appendChild(H),z.appendChild(R);const P=z,Y=async()=>{(n=>{setTimeout((()=>{const t=l();t.style.transform="scale(1)",t.style.top=`${n}px`}),200)})(f),(()=>{const n=c();if(n){const t=(()=>{const n=document.createElement("div");return n.className=i,n})();n.appendChild(t)}})();try{const n=window.getSelection().toString(),t=await(n=>new Promise(((t,e)=>{chrome.runtime.sendMessage({message:"generateText",prompt:n},(n=>{console.log(n),n?t(n):e("Something wrong")}))})))(n);y(),B(t)}catch(t){y(),B("Something went wrong"),n(t)}};(async()=>{s()&&C(),(()=>{const n=document.createElement("link");n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@500&display=swap",document.head.appendChild(n)})(),(()=>{const n=document.createElement("div");n.setAttribute("id",r),document.body.insertAdjacentHTML("afterbegin",n.outerHTML)})(),(()=>{const n=`\n  .${i} {\n  width: 35px;\n  aspect-ratio: 1;\n  display: grid;\n  transition: all linear 0.1s;\n  position: absolute;\n  top: 80px;\n  left: 160px;\n\n}\n.${i}:before,\n.${i}:after {\n  content: "";\n  grid-area: 1/1;\n  border-radius: 50%;\n  background: #FFFFFF;\n  -webkit-mask:repeating-linear-gradient(#000 0 5px,#0000 0 10px);\n  animation: l35 1.5s infinite;\n}\n.${i}:after {\n  -webkit-mask:repeating-linear-gradient(#0000 0 5px,#000 0 10px);\n  --s:-1;\n}\n@keyframes l35 {\n  0%,\n  10% {transform: translate(0) rotate(0)}\n  35% {transform: translate(calc(var(--s,1)*50%)) rotate(0)}\n  66% {transform: translate(calc(var(--s,1)*50%)) rotate(calc(var(--s,1)*180deg))}\n  90%,\n  100% {transform: translate(0) rotate(calc(var(--s,1)*180deg))}\n}`;document.getElementById(r).attachShadow({mode:"open"}).innerHTML=`\n  <style>\n    ${n}\n  </style>\n  ${P.outerHTML}`})(),(()=>{const n=l();document.addEventListener("click",L),window.addEventListener("scroll",L),n.addEventListener("mouseover",T),n.addEventListener("mouseout",$)})(),await Y()})()})();
//# sourceMappingURL=content.index.js.map